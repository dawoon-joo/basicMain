<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="/common/css/font/font.css">
  <link rel="stylesheet" href="/common/css/swiper-bundle.min.css">
  <link rel="stylesheet" href="/common/css/jquery.fullpage.min.css">
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
  <link rel="stylesheet" href="/common/css/base.css">
  <link rel="stylesheet" href="/common/css/sub.css">
  <link rel="stylesheet" href="/common/css/main.css">
  <link rel="stylesheet" href="/common/css/common.css">
  <script src="/common/js/gsap.min.js"></script>
  <script src="/common/js/ScrollTrigger.min.js"></script>
  <script src="/common/js/ScrollToPlugin.min.js"></script>
  <script src="/common/js/ScrollMagic.min.js"></script>
  <script src="/common/js/scrollreveal.min.js"></script>
  <script src="/common/js/lenis.min.js"></script>
  <script src="/common/js/swiper-bundle.min.js"></script>
  <!-- <script src="/common/js/jquery-3.7.1.min.js"></script> -->
  <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script src="/common/js/main.js"></script>
  <script src="/common/js/sub.js"></script>
  <script src="/common/js/device.js"></script>
  <script src="/common/js/header.js"></script>
  <script src="/common/js/common.js"></script>
</head>

<body>
  <header id="header" class="header">
    <h1>
      <a href="/" class="logo">
        <span class="blind">Test Logo</span>
      </a>
    </h1>
    <div class="gnb">
      <nav class="nav">
        <ul class="depth1" data-lenis-prevent>
          <li>
            <a href="#">About Us</a>
            <ul class="depth2">
              <li><a href="#">소개</a></li>
              <li><a href="#">연혁</a></li>
              <li><a href="#">수상</a></li>
              <li><a href="#">오시는 길</a></li>
              <li><a href="#">Careers</a></li>
            </ul>
          </li>
          <li>
            <a href="#">Global Competence</a>
            <ul class="depth2">
              <li><a href="#">미국</a></li>
              <li><a href="#">캐나다</a></li>
              <li><a href="#">독일</a></li>
              <li><a href="#">중국</a></li>
              <li><a href="#">베트남</a></li>
              <li><a href="#">미얀마</a></li>
              <li><a href="#">캄보디아</a></li>
              <li><a href="#">태국</a></li>
              <li><a href="#">몽골</a></li>
              <li><a href="#">Asia Practice Circle</a></li>
            </ul>
          </li>
          <li>
            <a href="#">Expertise</a>
            <ul class="depth2">
              <li><a href="#">분야별</a></li>
              <li><a href="#">산업별</a></li>
              <li><a href="#">센터</a></li>
            </ul>
          </li>
          <li>
            <a href="#">Professionals</a>
            <ul class="depth2">
              <li><a href="#">변호사</a></li>
              <li><a href="#">외국변호사</a></li>
              <li><a href="#">고문</a></li>
              <li><a href="#">전문위원</a></li>
            </ul>
          </li>
          <li>
            <a href="#">Insights</a>
            <ul class="depth2">
              <li><a href="#">최근 업무사례</a></li>
              <li><a href="#">콘텐츠 아카이브</a></li>
              <li><a href="#">언론보도</a></li>
              <li><a href="#">법인소식</a></li>
              <li><a href="#">뉴스레터</a></li>
              <li><a href="#">Seminar</a></li>
              <li><a href="#">발간자료</a></li>
            </ul>
          </li>
          <li>
            <a href="#">Social Impact</a>
            <ul class="depth2">
              <li><a href="#">사회공헌</a></li>
              <li><a href="#">D-TECH</a></li>
              <li><a href="#">D'CHANGE</a></li>
              <li><a href="#">TIME BANK</a></li>
              <li><a href="#">B-Corp</a></li>
            </ul>
          </li>
        </ul>
      </nav>
      <div class="close">
        <a href="javascript:">
          <span class="circle"></span>
          <span class="blind">Close Menu</span>
        </a>
      </div>
    </div>
    <div class="header-right">
      <div class="site-wrap">
        <button type="button" class="btn-site">Family Site 바로가기</button>
        <div class="ico ico-arrow-drop"><span class="hide">Arrow</span></div>
        <ul class="familyLink">
          <li><a href="#" target="_blank" title="새창으로 열림">Family Site 1</a></li>
          <li><a href="#" target="_blank" title="새창으로 열림">Family Site 2</a></li>
        </ul>
      </div>
      <div class="header-language">
        <button class="current" aria-pressed="false"><span class="text">KR</span></button>
        <ul>
          <li><a href="javascript:lang_chg('ko')">KR</a></li>
          <li><a href="javascript:lang_chg('en')">EN</a></li>
          <li><a href="javascript:lang_chg('cn')">CN</a></li>
        </ul>
      </div>
      <div class="hamburger">
        <a href="javascript:">
          <span class="bar"></span>
          <span class="bar"></span>
          <span class="bar"></span>
          <span class="blind">Open Menu</span>
        </a>
      </div>
    </div>
  </header>
  <div class="wrap">
    <section class="main-visual">
      <div class="sticky">
        <div class="line"></div>
        <div class="col left">
          <h2 class="heading split">DLG offers innovative <br class="pc">legal solutions.</h2>
        </div>
        <div class="col right">
          <div class="line vertical"></div>
          <div class="swiper visual-sw">
            <div class="swiper-wrapper">
              <div class="swiper-slide">
                <div class="slide-bg">
                  <img src="/images/main/visual-img.jpg" alt="">
                  <div class="line bottom right"></div>
                </div>
                <div class="slide-text">
                  <h2 class="heading">
                    Reaching out <br>
                    to people in need.
                  </h2>
                  <p class="desc">
                    법무법인 디엘지는 전문성과 혁신으로 산업의 Frontier에서 고객을 도우며 <br class="pc">
                    글로벌한 업무능력과 산업에 대한 깊은 통찰력으로 사회 변화를 위한 <br class="pc">
                    Shared Value를 함께 만들어 갑니다.
                  </p>
                </div>
              </div>
              <div class="swiper-slide">
                <div class="slide-bg">
                  <img src="/images/main/visual-img.jpg" alt="">
                  <div class="line bottom right"></div>
                </div>
                <div class="slide-text">
                  <h2 class="heading">
                    Reaching out <br>
                    to people in need.2
                  </h2>
                  <p class="desc">
                    법무법인 디엘지는 전문성과 혁신으로 산업의 Frontier에서 고객을 도우며 <br class="pc">
                    글로벌한 업무능력과 산업에 대한 깊은 통찰력으로 사회 변화를 위한 <br class="pc">
                    Shared Value를 함께 만들어 갑니다.
                  </p>
                </div>
              </div>
            </div>
            <div class="control-wrap">
              <div class="pagination"></div>
              <div class="button-group">
                <div class="button-prev"></div>
                <div class="button-next"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <section class="sec" data-section-header="dark"></section>
    <section class="sec"></section>
    <div class="floating-container">
      <div class="scroll-to">
        <a href="javascript:" class="btn-top scroll-top"></a>
      </div>
    </div>
  </div>
  <footer id="footer" class="footer">
    <div class="inner">
      <div class="content-top">
        <div class="sitemap">
          <article>
            <dl>
              <dt><a href="javascript:">Menu 1</a></dt>
              <dd><a href="#">Sub Menu 1-1</a></dd>
              <dd><a href="#">Sub Menu 1-2</a></dd>
              <dd><a href="#">Sub Menu 1-3</a></dd>
              <dd><a href="#">Sub Menu 1-4</a></dd>
              <dd class="w-100"><a href="#">Sub Menu 1-5</a></dd>
              <dd class="w-100"><a href="#">Sub Menu 1-6</a></dd>
            </dl>
          </article>
          <article>
            <dl>
              <dt><a href="javascript:">Menu 2</a></dt>
              <dd><a href="#">Sub Menu 2-1</a></dd>
              <dd><a href="#">Sub Menu 2-2</a></dd>
              <dd><a href="#">Sub Menu 2-3</a></dd>
              <dd><a href="#">Sub Menu 2-4</a></dd>
              <dd><a href="#">Sub Menu 2-5</a></dd>
              <dd><a href="#">Sub Menu 2-6</a></dd>
              <dd><a href="#">Sub Menu 2-7</a></dd>
              <dd><a href="#">Sub Menu 2-8</a></dd>
            </dl>
          </article>
          <article>
            <dl>
              <dt><a href="javascript:">Menu 3</a></dt>
              <dd class="w-100"><a href="#">Sub Menu 3-1</a></dd>
              <dd class="w-100"><a href="#">Sub Menu 3-2</a></dd>
            </dl>
          </article>
          <article>
            <dl>
              <dt><a href="javascript:">Menu 4</a></dt>
              <dd class="w-100"><a href="#">Sub Menu 4-1</a></dd>
              <dd class="w-100"><a href="#">Sub Menu 4-2</a></dd>
            </dl>
          </article>
          <article>
            <dl>
              <dt><a href="javascript:">Menu 5</a></dt>
              <dd class="w-100"><a href="#">Sub Menu 5-1</a></dd>
              <dd class="w-100"><a href="#">Sub Menu 5-2</a></dd>
              <dd class="w-100"><a href="#">Sub Menu 5-3</a></dd>
              <dd class="w-100"><a href="#">Sub Menu 5-4</a></dd>
            </dl>
          </article>
        </div>
        <div class="con-right">
          <div class="phone"><a href="tel:0000000000">000-0000-0000</a></div>
          <ul class="footer-link">
            <li><a href="#">Link 1</a></li>
            <li><a href="#">Link 2</a></li>
            <li class="active"><a href="#">Link 3</a></li>
          </ul>
          <ul class="footer-sns">
            <li><a href="javascript:" title="새창으로 열림" target="_blank"><i class="icon icon-youtube"></i></a></li>
            <li><a href="javascript:" title="새창으로 열림" target="_blank"><i class="icon icon-kakao"></i></a></li>
            <li><a href="javascript:" title="새창으로 열림" target="_blank"><i class="icon icon-instagram"></i></a></li>
            <li><a href="javascript:" title="새창으로 열림" target="_blank"><i class="icon icon-facebook"></i></a></li>
            <li><a href="javascript:" title="새창으로 열림" target="_blank"><i class="icon icon-linkedin"></i></a></li>
          </ul>
        </div>
      </div>
      <div class="content-bottom">
        <div class="logo-box">
          <img src="/common/images/logo.png" alt="Test Logo">
        </div>
        <p class="copyright">©<span id="copyYear">2024</span> Test Company.</p>
      </div>
    </div>
  </footer>
</body>
<script>
  document.addEventListener('DOMContentLoaded', ()=> {
    gsapMotion();
  })
  const mainVisualMotion = (triggerClass, isMobile) => {
    const section = document.querySelector(triggerClass);
    const header = document.querySelector('.header');
    const colLeft = section.querySelector('.col.left');
    const colRight = section.querySelector('.col.right');
    const heading = colLeft.querySelector('.heading');
    const headingSplit = heading.querySelectorAll('.split .word');
    const headerLine = header.querySelector('.line');
    let headingHeight = heading.offsetHeight;
    const line = section.querySelectorAll('.line');
    const slideBg = section.querySelectorAll('.slide-bg');
    const slideText = section.querySelectorAll('.slide-text');
    const allHeadings = gsap.utils.toArray(slideText).map(text => text.querySelector('.heading'));
    const allDescs = gsap.utils.toArray(slideText).map(text => text.querySelector('.desc'));
    const allImages = gsap.utils.toArray(slideBg).map(bg => bg.querySelector('img'));
    const controlWrap = section.querySelector('.control-wrap');
    
    const intro = gsap.timeline();
    const tl = gsap.timeline();
    const tl2 = gsap.timeline();
    
    lenis.stop();
    document.body.style.overflow = 'hidden';
    
    gsap.set(header, { autoAlpha: 0 });
    gsap.set(allHeadings, { autoAlpha: 0, y: 50 });
    gsap.set(allDescs, { autoAlpha: 0, y: 50 });
    gsap.set(allImages, { autoAlpha: 0 });
    
    intro.to(heading, { top: `calc(100% - ${headingHeight}px)`, duration: 1 })
    .to(heading, { top: '0%', duration: 0.8, ease: 'power2.inOut' })
    .to(headerLine, { scale: 1, duration: 0.5, ease: 'power2.inOut' })
    .to(line, { scale: 1, duration: 0.8, ease: 'power2.inOut' }, '<')
    .to(header, { autoAlpha: 1, duration: 1 }, '<+=0.5')
    .to(allHeadings, { autoAlpha: 1, y: 0, duration: 1 }, '<')
    .to(allDescs, { autoAlpha: 1, y: 0, duration: 1 }, '<+=0.2')
    .to(allImages, { autoAlpha: 1, duration: 2, onComplete: () => { 
      lenis.start(); 
      document.body.style.overflow = 'auto'; 
    } }, '<');
    
    // 메인 모션 타임라인 ScrollTrigger
    ScrollTrigger.create({
      trigger: triggerClass,
      start: "top top",
      end: "bottom bottom",
      scrub: 1,
      animation: tl,
      // markers: true
    });
    gsap.set(controlWrap, { autoAlpha: 0, y:30 });
    tl.to(colRight, { flex: '0 0 100%', duration: 1 }, 'motion')
    .to(colLeft, { xPercent: -100, duration: 1 }, 'motion')
    .to(slideBg, { height: '100%', padding: 0, duration: 1 }, 'motion')
    .to(slideText, { height: '100%', padding: '100px 60px', duration: 1 }, 'motion')
    .to(allDescs, { fontSize: '24px', duration: 1 }, 'motion')
    .to(allHeadings, { marginBottom: '8vh', fontSize: '96px', duration: 1 }, 'motion')
    
    ScrollTrigger.create({
      trigger: triggerClass,
      start: "10% 30%",
      end: "+=100%",
      scrub: 1,
      animation: tl2,
    });
    tl2.to(slideText, { color: '#fff' }, 'motion');
    
    document.addEventListener('resize', () => {
      headingHeight = heading.offsetHeight;
    });
    
    const videoAutoplaySwiper = () => {
      const delay = 4;
      const speed = 1;
      let swiper;
      const controlWrap = document.querySelector('.control-wrap');
      
      const initSwiper = () => {
        swiper = new Swiper('.visual-sw', {
          loop: true,
          speed: speed * 1000,
          effect: 'fade',
          fadeEffect: {
            crossFade: true
          },
          autoplay: {
            delay: delay * 1000,
            disableOnInteraction: false,
            waitForTransition: false,
            enabled: false 
          },
          pagination: {
            el: '.pagination',
            type: 'custom',
            renderCustom: function(swiper, current, total) {
              return `<span class="current">${current < 10 ? '0' + current : current}</span><span class="bar"><span class="progress"></span></span><span class="total">${total < 10 ? '0' + total : total}</span>`;
            }
          },
          navigation: {
            nextEl: '.button-next',
            prevEl: '.button-prev',
          },
          on: {
            init: (swiper) => {
              swiper.on('paginationRender', function() {
                setTimeout(() => animate(swiper), 50);
                swiper.autoplay.start();
              });
            },
            slideChangeTransitionStart: (swiper) => {
              animate(swiper);
              let currentSlide = swiper.slides[swiper.activeIndex];
              let video = currentSlide.querySelector('video');
              if (video) {
                video.currentTime = 0;
                video.play();
              }
            }
          }
        });
        
        // 컨트롤 영역 표시
        gsap.to(controlWrap, { autoAlpha: 1, delay: 0.5, y:0, duration: 0.5 });
        return swiper;
      };
      
      const resetSwiper = () => {
        const existingSwiper = document.querySelector('.visual-sw')?.swiper;
        if (existingSwiper) {
          if (existingSwiper.autoplay) existingSwiper.autoplay.stop();
          existingSwiper.destroy(true, true);
        }
        gsap.to(controlWrap, { autoAlpha: 0, y: 20, duration: 0.3 });
      };
      
      const animate = (swiper) => {
        if (!swiper || !swiper.el) return;
        const slide = swiper.el.querySelector('.swiper-slide-active');
        let index = swiper.realIndex;
        let total = swiper.slides.length;
        if (swiper.params.loop) total = total - swiper.loopedSlides * 2;
        
        const progressBar = document.querySelector('.pagination .progress');
        if (!progressBar) return;
        gsap.killTweensOf(progressBar);
        gsap.set(progressBar, { width: 0 });
        gsap.to(progressBar, {
          width: '100%',
          duration: delay,
          ease: 'none'
        });
      };
      
      // 스와이퍼 컨트롤을 위한 별도의 ScrollTrigger
      ScrollTrigger.create({
        trigger: triggerClass,
        start: "80% bottom",
        end: "bottom bottom",
        markers: {
          startColor: "green",
          endColor: "red",
          fontSize: "12px"
        },
        onEnter: () => {
          initSwiper();
        },
        onLeaveBack: () => {
          resetSwiper();
        }
      });
    };
    videoAutoplaySwiper();
  };
  const gsapMotion= () => {
    let mm = gsap.matchMedia();
  
    mm.add({
      isMobile: "(max-width: 767px)",
      isDesktop: "(min-width: 768px)"
    }, (context) => {
      let { isMobile, isDesktop } = context.conditions;
  
      mainVisualMotion('.main-visual', isMobile);
    });
  }
</script>
</html>